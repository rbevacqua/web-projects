<!-- Purpose: Like Facebook's Feed -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>User Profile</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/profile.css">
        <meta name="google-signin-client_id" content="776046105873-f53jto4em6m6spl89q5o3kqlo4nrjvsa.apps.googleusercontent.com"/>
        <script src="/scripts/jquery-3.0.0.min.js" defer></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" defer></script>
        <script src="/scripts/bootstrap.min.js" defer></script>
        <script src="/scripts/about.js" defer></script>
        <script src="/scripts/getInformation.js" defer></script>
        <script src="/scripts/userObject.js" defer></script>
        <script src="/scripts/profile.js" defer></script>
        <script src="/scripts/fetchUsers.js" defer></script>
    </head>
    <body>
        <script>
            function signOut() {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut().then(function () {
                    console.log('User signed out.');
                });
            }

            function onLoad() {
                gapi.load('auth2', function() {
                    gapi.auth2.init();
                });
            }
        </script>

        <nav class="navbar navbar-inverse navbar-fixed-top" style="background-color: #004080;">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>                        
                    </button>
                    <a class="navbar-brand" href="/">Car Detail Exchange</a>
                    <img src="images/logo.png" style="width:50px;height:50px;">
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul id="navigation" class="nav navbar-nav">
                        <li class="active"><a href="/userprofile"><span class="glyphicon glyphicon-home"></span> Home</a></li>
                        <li id="about_link"><a><span class="glyphicon glyphicon-info-sign"></span> About</a></li>
                        <li><a href="/vehicles"><span class="glyphicon glyphicon-star"></span> Your Vehicles</a></li>
                        <li><a href="/contracts"><span class="glyphicon glyphicon-list-alt"></span> Contracts</a></li>
                    </ul>
                    <ul id="navigation" class="nav navbar-nav navbar-right">
                        <li><a href="/logout" onclick="signOut()"><span class="glyphicon glyphicon-log-out"></span> Log Out</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- The "About" Modal -->
        <div id="myModal" class="modal">

              <!-- Modal content -->
            <div id="aboutModalContent" class="modal-content">
                <div class="modal-header">
                  <span class="close">Ã—</span>
                  <h2>About Us</h2>
                </div>
                <div class="modal-body" id="aboutBody">
                    <h2>Our Mission</h2>
                        <p>Keep your car clean?</p>

                    <h2>Who we are</h2>
                        <p>We're people passionate about keeping cars clean.</p>

                    <h2>Contact Us</h2>
                        <p>Follow us on Twitter</p>
                </div>
            </div>
        </div>

        <!-- Add Users Modal -->
        <div class="modal fade" id="usersModal" role="dialog">
            <div class="modal-dialog"> 
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Follow Users</h4>
                    </div>
                    <div class="modal-body">
                        <div id="usersList">

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>   
            </div>
        </div>
        <p id="welcomeStatement">
            Welcome <%- name %>! This is your user profile. See information about yourself.
        </p>
        <div class="well">
            <legend>Your Biography:</legend>
            <p id="biography">
                
            </p>
            <form action="/updateBio" method="post">
                <input type="text" placeholder="Update your biography" name="bio"/>
                <input type="submit" id="bioSubmit" name="submit" value="Update!"/>
            </form>
        </div>
        <div class="well" id="following">
            <legend>Following:</legend>
            <p id="users">
                
            </p>
        </div>
        <div class="well" id="options">
            <legend>Explore your Options:</legend>
            <button type="button" class="btn btn-info btn-md" data-toggle="modal" data-target="#usersModal" name="AddUsers">Find People!</button>
            <button type="button" class="btn btn-info btn-md" onclick="window.location.href='/vehicles'">Add Cars</button>
            <button type="button" class="btn btn-info btn-md" onclick="window.location.href='/contracts/search'">Find Contracts</button>
        </div>

        <div class ="well" id="comments">
            <legend>Your Average Rating:</legend>
            <p id="rating">
                This is your average rating:
            </p>
            <legend>Comments:</legend>
            <p id="comment">

            </p>
        </div>

            <!-- rating will be send to server with AJAX-->

            <!-- States:
            Admin/User looking at own profile: doesn't see this, can't rate yourself
            Another user: sees this, can only send one rating -->
            <!--<form action="/rateuser" method="post">-->
                <!--<fieldset class="rating">-->
                    <!--<legend>Rate this person:</legend>-->
                    <!--<input type="radio" id="star5" name="rating" value="5" ><label for="star5">5 stars</label>-->
                    <!--<input type="radio" id="star4" name="rating" value="4" ><label for="star4">4 stars</label>-->
                    <!--<input type="radio" id="star3" name="rating" value="3" ><label for="star3">3 stars</label>-->
                    <!--<input type="radio" id="star2" name="rating" value="2" ><label for="star2">2 stars</label>-->
                    <!--<input type="radio" id="star1" name="rating" value="1" ><label for="star1">1 star</label>-->
                <!--</fieldset>-->

                <!--<input type="submit" name="rate" value="Rate">-->
            <!--</form>-->

            <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>

    </body>
</html>
